from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters

TOKEN = "7614413819:AAGyklxdklFiO1zKm8hmjhC3vncrzQJ-AKE"

# Funci贸n para el comando /start
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    mensaje = (
        " Bienvenido a *Banca Blindada*\n\n"
        "Aqu铆 vas a recibir los mejores pron贸sticos deportivos del mercado.\n"
        "Pronto podr谩s acceder a nuestro servicio premium con pron贸sticos exclusivos.\n\n"
        " El sistema de pago estar谩 disponible en breve. 隆Permanece atento!"
    )
    await update.message.reply_text(mensaje, parse_mode='Markdown')

# Analiza mensajes con m煤ltiples patrones
async def responder_mensaje(update: Update, context: ContextTypes.DEFAULT_TYPE):
    texto = update.message.text.lower()

    saludos = ["hola", "buenas", "hey", "qu茅 tal", "saludos"]
    despedidas = ["gracias", "muchas gracias", "ok gracias", "hasta luego", "nos vemos", "chao", "adi贸s"]
    preguntas_pago = [
        "precio", "pagar", "vale", "coste", "cu谩nto cuesta", "tarifa", 
        "c贸mo pago", "c贸mo pagar", "quiero pagar", "quiero ver los pron贸sticos",
        "c贸mo miro los pron贸sticos", "c贸mo puedo pagar", "dime precio", "c贸mo ver los pagos"
    ]

    if any(p in texto for p in saludos):
        await update.message.reply_text("隆Qu茅 tal, crack!  Bienvenido a *Banca Blindada*. 驴En qu茅 puedo ayudarte?")
    
    elif any(p in texto for p in despedidas):
        await update.message.reply_text("隆De nada! Aqu铆 me tienes para lo que necesites. Un saludo fuerte ")

    elif any(p in texto for p in preguntas_pago):
        await update.message.reply_text(
            " Los pron贸sticos premium se env铆an en nuestro grupo principal.\n"
            "Ah铆 mismo se publica el enlace para realizar el pago cuando hay nuevos tips disponibles.\n"
            " Mantente atento para no perd茅rtelos."
        )
    
    else:
        await update.message.reply_text(" No estoy seguro de haber entendido eso. Pero si tienes dudas sobre pagos, pron贸sticos o c贸mo funciona todo, 隆aqu铆 estoy para ayudarte!")

if __name__ == '__main__':
    app = ApplicationBuilder().token(TOKEN).build()
    
    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, responder_mensaje))

    print("Bot funcionando con respuestas m谩s naturales...")
    app.run_polling()
